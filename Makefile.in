include build/Makefile.incl

targets = render cwmcc obcl kernel plugins themes data

all: libtool
	@for i in $(targets); do \
		$(MAKE) -$(MAKEFLAGS) -f build/Makefile.$$i $@ || break; \
	done

uninstall:
	@for i in $(targets); do \
		$(MAKE) -$(MAKEFLAGS) -f build/Makefile.$$i $@ || break; \
	done

install: all
	@for i in $(targets); do \
		$(MAKE) -$(MAKEFLAGS) -f build/Makefile.$$i $@ || break; \
	done

clean:
	@for i in $(targets); do \
		$(MAKE) -$(MAKEFLAGS) -f build/Makefile.$$i $@ || break; \
	done
	$(RM) *\~

distclean: clean
	$(RM) configure Makefile.incl Makefile
	$(RM) -r .deps/

LIBTOOL_DEPS = @LIBTOOL_DEPS@
libtool: $(LIBTOOL_DEPS)
	$(SHELL) ./config.status --recheck

.PHONY: all clean distclean install uninstall
